<div class="container">
  
  <div class="row" > 
    <div class="col-8 " *ngIf="!showQuote" >
      <div class="col-12 py-3" >
        <div class="card">
          <div class="card-body">
              <div class="text-left">            
                  <h1>New Quote</h1>
                  <br/>
                </div>  
              <h2>From :</h2>
          <div class="row" >
              <table class="table table-borderless" id="address" >
                  <tr>
                      <td class="label">Name</td>
                  </tr>      
                  <tr>
                      <td class="slimField form-group">
                        <input class="form-control" id="Name" placeholder="Name"
                        [(ngModel)]="formShipment.From.Name"  value="{{ formShipment.From.Name  }}" required 
                        (focusout)="validateNameForms(true,false,false)"/>
                      </td>
                    </tr>  
                    <tr>
                        <td colspan="2">
                            <div class="alert alert-danger" role="alert" 
                            *ngIf="fromNameError && fromNameError.length > 0">
                            <span >
                                {{fromNameError}} <br/>
                          </span>
                          </div>
                        </td>
                    </tr>                       
                    <tr>
                        <td class="label">Address</td>
                    </tr>      
                    <tr>
                        <td class="slimField">
                          <div class="form-group ">
                            <input placeholder="Search for location" autocomplete="new-password" autocorrect="off" autocapitalize="off" spellcheck="off" 
                              type="text" class="form-control" #search1 [formControl]="searchControl1"  >
                            <agm-map [latitude]="latitude" [longitude]="longitude" [scrollwheel]="false" [zoom]="zoom">
                                <agm-marker [latitude]="latitude" [longitude]="longitude"></agm-marker>
                            </agm-map>   
                          </div>   

                        </td>
                      </tr>  
                      <tr>
                          <td colspan="2">
                            <div class="alert alert-danger" role="alert" 
                                *ngIf="fromErrors && fromErrors.length > 0">
                                <span *ngFor="let error of fromErrors">
                                    {{error}} <br/>
                                </span>
                            </div>
                          </td>
                      </tr>                    
                </table>     
          </div> 
        </div>
        </div>
      </div>
      <div class="col-12" >
          <div class="card rounded ">
          <div class="card-body">
            <h2>To :</h2>

          <div class="row" >

              <table class="table table-borderless" >
                  <tr>
                      <td class="label">Name </td>
                    </tr>      
                    <tr>                        
                      <td class="slimField">
                        <input class="form-control" id="Name" required
                        [(ngModel)]="formShipment.To.Name" placeholder="Name" value="{{ formShipment.To.Name  }}"
                        (focusout)="validateNameForms(false,true)" />

                      </td>
                  </tr>  
                  <tr>
                      <td colspan="2">
                          <div class="alert alert-danger" role="alert" 
                          *ngIf="toNameError && toNameError.length > 0">
                          <span >
                              {{toNameError}} <br/>
                        </span>
                        </div>
                      </td>
                  </tr>                  
                  <tr>
                      <td class="label">Address </td>
                    </tr>      
                    <tr>                        
                      <td class="slimField">
                        <div class="form-group">
                          <input placeholder="Search for location" autocomplete="new-password" autocorrect="off" 
                          autocapitalize="off" spellcheck="off" type="text" class="form-control" #search2 
                          [formControl]="searchControl2">
                          <agm-map [latitude]="latitude" [longitude]="longitude" [scrollwheel]="false" [zoom]="zoom">
                              <agm-marker [latitude]="latitude" [longitude]="longitude"></agm-marker>
                          </agm-map>   
                        </div>
                      </td>
                  </tr>    
                  <tr>
                      <td colspan="2">
                        <div class="alert alert-danger" role="alert" 
                            *ngIf="toErrors && toErrors.length > 0">
                            <span *ngFor="let error of toErrors">
                                {{error}} <br/>
                            </span>
                        </div>
                      </td>
                  </tr>                                   
                </table>                  
              </div>         
          </div>         
        </div>    
      </div>    
      <div class="col-12 py-3" >
          <div class="card">
            <div class="card-body text-left">
                <h2>Parcel :</h2>
                <table class="table table-borderless">
                    <tr>
                        <td class="label">Length </td>
                        <td class="slimField">
                            <div class="input-group mb-3">
                                <input type="number" class="form-control" id="Length"  
                                [(ngModel)]=" formShipment.Parcels[0].Length " placeholder="0" required
                                value="{{ formShipment.Parcels[0].Length }}" />
                                <div class="input-group-append">
                                  <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown" 
                                  aria-haspopup="true" aria-expanded="false">{{ formShipment.Parcels[0].Distance_unit }}</button>
                                    <div class="dropdown-menu">
                                      <a class="dropdown-item" (click)="formShipment.Parcels[0].Distance_unit='cm'" >cm</a>
                                      <a class="dropdown-item" (click)="formShipment.Parcels[0].Distance_unit='in'" >in</a>
                                      <a class="dropdown-item" (click)="formShipment.Parcels[0].Distance_unit='ft'" >ft</a>
                                      <a class="dropdown-item" (click)="formShipment.Parcels[0].Distance_unit='mm'" >mm</a>
                                      <a class="dropdown-item" (click)="formShipment.Parcels[0].Distance_unit='m'" >m</a>
                                      <a class="dropdown-item" (click)="formShipment.Parcels[0].Distance_unit='yd'" >yd</a>
                                    </div>                                
                                </div>
                              </div>
                    </tr>  
                    <tr>
                        <td class="label">Width </td>
                        <td class="slimField">
                            <div class="input-group mb-3">
                            <input type="number" class="form-control" id="width"  [(ngModel)]="formShipment.Parcels[0].Width "
                            value="{{ formShipment.Parcels[0].Width }}"  placeholder="0" required  />
                            <div class="input-group-append">
                              <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown" 
                              aria-haspopup="true" aria-expanded="false">{{ formShipment.Parcels[0].Distance_unit }}</button>
                                <div class="dropdown-menu">
                                  <a class="dropdown-item" (click)="formShipment.Parcels[0].Distance_unit='cm'" >cm</a>
                                  <a class="dropdown-item" (click)="formShipment.Parcels[0].Distance_unit='in'" >in</a>
                                  <a class="dropdown-item" (click)="formShipment.Parcels[0].Distance_unit='ft'" >ft</a>
                                  <a class="dropdown-item" (click)="formShipment.Parcels[0].Distance_unit='mm'" >mm</a>
                                  <a class="dropdown-item" (click)="formShipment.Parcels[0].Distance_unit='m'" >m</a>
                                  <a class="dropdown-item" (click)="formShipment.Parcels[0].Distance_unit='yd'" >yd</a>
                                </div>                              
                            </div>   
                          </div>
                          </td>
                    </tr>  
                    <tr>
                        <td class="label">Height </td>
                        <td class="slimField">
                            <div class="input-group mb-3">
                            <input type="number" class="form-control" id="height"  [(ngModel)]="formShipment.Parcels[0].Height "
                            value="{{ formShipment.Parcels[0].Height }}" placeholder="0"  required  />
                            <div class="input-group-append">
                              <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown" 
                              aria-haspopup="true" aria-expanded="false">{{ formShipment.Parcels[0].Distance_unit }}</button>
                                <div class="dropdown-menu">
                                  <a class="dropdown-item" (click)="formShipment.Parcels[0].Distance_unit='cm'" >cm</a>
                                  <a class="dropdown-item" (click)="formShipment.Parcels[0].Distance_unit='in'" >in</a>
                                  <a class="dropdown-item" (click)="formShipment.Parcels[0].Distance_unit='ft'" >ft</a>
                                  <a class="dropdown-item" (click)="formShipment.Parcels[0].Distance_unit='mm'" >mm</a>
                                  <a class="dropdown-item" (click)="formShipment.Parcels[0].Distance_unit='m'" >m</a>
                                  <a class="dropdown-item" (click)="formShipment.Parcels[0].Distance_unit='yd'" >yd</a>
                                </div>                              
                            </div>  
                          </div>
                          </td>
                    </tr>  
                    <tr>
                        <td class="label">Weight </td>
                        <td class="slimField">
                            <div class="input-group mb-3">
                                <input type="number" class="form-control" id="weight"  [(ngModel)]="formShipment.Parcels[0].Weight "
                                value="{{ formShipment.Parcels[0].Weight }}"  placeholder="0" required (focusout)="validateAddressForms(false,false,true)" />
                                <div class="input-group-append">
                                  <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown" 
                                  aria-haspopup="true" aria-expanded="false">{{ formShipment.Parcels[0].Mass_unit }}</button>
                                    <div class="dropdown-menu">
                                      <a class="dropdown-item" (click)="formShipment.Parcels[0].Mass_unit='g'" >g</a>
                                      <a class="dropdown-item" (click)="formShipment.Parcels[0].Mass_unit='oz'" >oz</a>
                                      <a class="dropdown-item" (click)="formShipment.Parcels[0].Mass_unit='lb'" >lb</a>
                                      <a class="dropdown-item" (click)="formShipment.Parcels[0].Mass_unit='kg'" >kg</a>
                                    </div>                                
                                </div>      
                              </div>
                          </td>
                    </tr>                                      
                </table>
                <div class="text-center">
                    <div class="alert alert-danger" role="alert" 
                        *ngIf="parcelErrors && parcelErrors.length > 0">
                        <span *ngFor="let error of parcelErrors">
                            {{error}} <br/>
                        </span>
                    </div>

                    <div class="alert alert-danger" role="alert" *ngIf="quoteError">
                        {{ quoteError }}
                    </div>                    

                    <button type="submit" class="btn btn-primary" (click)="onClickSubmit()" >Get Quote</button>   
                </div>
             
            </div>
          </div>
      </div>    
    </div>    

    <div class="col-8  py-3" *ngIf="showQuote && !showSelectedQuote" >
      <div class="card" >
        <div class="card-body text-left">
            <button type="button" class="btn btn-link" (click)="onClickBack(1)"> Back</button>
        </div>
        <div class="card-body text-center">
          <table class="table"  >
              <thead class="thead-dark">
                <tr >
                    <th colspan="2">Provider</th>
                    <th>Amount</th>
                    <th>Estimate</th>
                    <th>Servicelevel</th>
                    <th>Save</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let r of rates">
                  <th><img  src="{{r.Image}}" width="50" class="img-fluid" alt="Responsive image"></th>
                  <td> {{ r.Provider }}</td>
                  <td>${{ r.Amount }}{{r.Currency}}</td>
                  <td>{{ r.Estimate }} Days</td>
                  <td>{{ r.Servicelevel }}</td>
                  <td><button type="button" class="btn btn-success" (click)="onClickAdd(r)" >Select</button></td>
                </tr>
              </tbody>
          </table> 
          
          <button type="button" class="btn btn-primary" (click)="onClickBack()" >Back</button>
        </div>
      </div>
    </div>

    <div class="col-8  py-3" *ngIf="showQuote && showSelectedQuote" >
        <div class="card" >
            <div class="card-body text-left">
              <button type="button" class="btn btn-link" (click)="onClickBack(2)"> Back</button>
            <app-shipment></app-shipment> 
          </div>
        </div>
    </div>

    <div class="col-4 py-3 float-md-right">
      <div class="position-fixed w-25" >
          <app-formshipment formShipmentTitle="Summary" ></app-formshipment> 
      </div>
    </div>    
  </div>



  <div class="row" >

    </div>

</div>



